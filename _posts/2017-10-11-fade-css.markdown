---
layout: post
title:  "纯css实现网站背景图片变换"
categories: css
tags:  css 效果
author: Beats0
---

* content
{:toc}

用纯css实现网站背景图片变换,用到了css3的动画效果，主要使用自定义动画效果`Animation@keyframe`。@keyframe不仅能对图片有效，对div以及文字也有效果，定义的动画效果可以实现光影效果，发散效果，旋转效果，放大缩小效果，颜色交替叠加效果等，更高级的可以配合canvas使效果更佳。

效果：
```css
@keyframes Animation {
    0% {
        opacity: 0;
        animation-timing-function: ease-in;
    }
    8% {
        opacity: 1;
        transform: scale(1.05);
        animation-timing-function: ease-out;
    }
    17% {
        opacity: 1;
        transform: scale(1.1) rotate(0deg);
    }
    25% {
        opacity: 0;
        transform: scale(1.1) rotate(0deg);
    }
    100% {
        opacity: 0
    }
}
```

注意写上浏览器兼容性:`@keyframes``@-webkit-keyframes``@-moz-keyframes``@-o-keyframes``@-ms-keyframes`<br>
css代码详见[/css/fade.css](https://github.com/Beats0/Beats0.github.io/blob/master/css/fade.css)










## 详解：
### html部分
首先在html中的head里添加样式：
```css
<style type="text/css">
        .cb-slideshow li:nth-child(1) span {
            background-image: url(/images/1.jpg);
        }
        .cb-slideshow li:nth-child(2) span {
            background-image: url(/images/2.jpg);
        }
        .cb-slideshow li:nth-child(3) span {
        background-image: url(/images/3.jpg);
        }
</style>
```

关于imgages的数量可在body中添加修改：

```html
<section class="hidden-xs">
    <ul class="cb-slideshow">
        <li><span>苟利</span></li>
        <li><span>国家</span></li>
        <li><span>生死以</span></li>
    </ul>
</section>
```
这样的意思就是将对应的child下的img放入到对应的li中
### css部分
css代码详见[/css/fade.css](https://github.com/Beats0/Beats0.github.io/blob/master/css/fade.css)

```css
.cb-slideshow li span {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    color: transparent;
    background-size: cover;
    background-position: 50% 50%;
    background-repeat: no-repeat;
    opacity: 0;
    z-index: -2;
    -webkit-backface-visibility: hidden;
    animation: imageAnimation 36s linear infinite 0s;
```
对不同span设置不同的显示时间，以此达到图片交错的效果
```css
.cb-slideshow li:nth-child(1) span {
}

.cb-slideshow li:nth-child(2) span {
    -webkit-animation-delay: 6s;
    -moz-animation-delay: 6s;
    -o-animation-delay: 6s;
    -ms-animation-delay: 6s;
    animation-delay: 6s;
}

.cb-slideshow li:nth-child(3) span {
    -webkit-animation-delay: 12s;
    -moz-animation-delay: 12s;
    -o-animation-delay: 12s;
    -ms-animation-delay: 12s;
    animation-delay: 12s;
}
```

设置imageAnimation动画效果
```css
@keyframes imageAnimation {
    0% {
        opacity: 0;
        animation-timing-function: ease-in;
    }
    8% {
        opacity: 1;
        transform: scale(1.05);
        animation-timing-function: ease-out;
    }
    17% {
        opacity: 1;
        transform: scale(1.1) rotate(0deg);
    }
    25% {
        opacity: 0;
        transform: scale(1.1) rotate(0deg);
    }
    100% {
        opacity: 0
    }
}
```

## 附录
*CanvasRenderingContext2D对象的方法*

方法 | 描述 |
-----|-----|
arc() | 用一个中心点和半径，为一个画布的当前子路径添加一条弧线。
arcTo() | 使用目标点和一个半径，为当前的子路径添加一条弧线。
beginPath()           |        开始一个画布中的一条新路径（或者子路径的一个集合）。
bezierCurveTo()       |        为当前的子路径添加一个三次贝塞尔曲线。
clearRect()           |        在一个画布的一个矩形区域中清除掉像素。
clip()                |       使用当前路径作为连续绘制操作的剪切区域。
closePath()           |        如果当前子路径是打开的，就关闭它。
createLinearGradient()|        返回代表线性颜色渐变的一个 CanvasGradient 对象。
createPattern()       |        返回代表贴图图像的一个 CanvasPattern 对象。
createRadialGradient()|        返回代表放射颜色渐变的一个 CanvasGradient 对象。
drawImage()           |        绘制一幅图像。
fill()                |        使用指定颜色、渐变或模式来绘制或填充当前路径的内部。
fillRect()            |        绘制或填充一个矩形。
lineTo()              |        为当前的子路径添加一条直线线段。
moveTo()              |        设置当前位置并开始一条新的子路径。
quadraticCurveTo()    |        为当前路径添加一条贝塞尔曲线。
rect()                |        为当前路径添加一条矩形子路径。
restore()             |        为画布重置为最近保存的图像状态。
rotate()              |        旋转画布。
save()                |        保存 CanvasRenderingContext2D 对象的属性、剪切区域和变换矩阵。
scale()               |        标注画布的用户坐标系统。
stroke()              |        沿着当前路径绘制或画一条直线。
strokeRect()          |        绘制（但不填充）一个矩形。
translate()           |        转换画布的用户坐标系统。


## 参考

- [fade.css](https://github.com/Beats0/Beats0.github.io/blob/master/css/fade.css)
- [www.mygalgame.com](https://www.mygalgame.com)
- [cssslider:纯 CSS 的图片轮播图](http://cssslider.com/)
